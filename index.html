<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>å¤šä¸»é¢˜æ—¶é’Ÿ</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      transition: background 0.5s ease;
      position: relative;
    }
    h1 {
      margin-top: 50px;
    }
    .theme-switcher {
      margin: 30px 0;
    }
    .theme-button {
      padding: 12px 24px;
      margin: 0 10px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    .modern-btn { background: #607d8b; color: white; }
    .cute-btn { background: #ff90b3; color: white; }
    .batman-btn { background: #212121; color: #f9c349; }

    .clock-box {
      padding: 30px;
      border-radius: 16px;
      text-align: center;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      margin-bottom: 40px;
      background-repeat: no-repeat;
      background-position: center;
      background-size: contain;
    }

    .alarm-box {
      text-align: center;
      margin-bottom: 40px;
    }
    .alarm-box input[type="time"] {
      padding: 8px;
      font-size: 16px;
      border-radius: 6px;
      border: 1px solid #ccc;
      margin-bottom: 10px;
    }
    .alarm-box button {
      margin: 0 10px;
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    .theme-modern { background: linear-gradient(to right, #d7e1ec, #f0f4f8); color: #333; }
    .theme-modern .clock-box {
      background: white;
      font-family: 'Segoe UI', sans-serif;
      color: #333;
    }

    .theme-cute { background: linear-gradient(to right, #ffe0f0, #ffd6ec); color: #ff4081; }
    .theme-cute .clock-box {
      background: url('img/pink.jpg') no-repeat center center;
      background-size: cover;
      border: 5px dashed #ff90b3;
      font-family: 'Comic Sans MS', cursive;
      color: #ff4081;
      box-shadow: 0 0 30px rgba(249, 195, 73, 0.5);
    }

    .theme-batman {
      background-color: #000;
      color: #f9c349;
    }
    .theme-batman .clock-box {
      background: url('img/Batman.jpg') no-repeat center center;
      background-size: cover;

      border: 2px solid #f9c349;
      font-family: 'Orbitron', sans-serif;
      color: #f9c349;
      box-shadow: 0 0 30px rgba(249, 195, 73, 0.5);
    }
  </style>
</head>
<body class="theme-modern">
  <h1>å¤šä¸»é¢˜æ—¶é’Ÿåˆ‡æ¢</h1>
  <div class="theme-switcher">
    <button class="theme-button modern-btn" onclick="setTheme('modern')">ç®€çº¦é«˜çº§</button>
    <button class="theme-button cute-btn" onclick="setTheme('cute')">å¯çˆ±é£æ ¼</button>
    <button class="theme-button batman-btn" onclick="setTheme('batman')">è™è ä¾ </button>
  </div>

  <div class="clock-box">
    <h2 id="theme-title">ç®€çº¦é«˜çº§é’Ÿè¡¨</h2>
    <canvas id="clock" width="300" height="300"></canvas>
  </div>

  <div class="alarm-box">
    <!-- æ—¥æœŸæ—¶é—´é€‰æ‹©å™¨ -->
    <input type="datetime-local" id="alarm-datetime">
    <!-- æ˜¯å¦æ¯å¤©é‡å¤ -->
    <label style="margin-left:10px;">
      <input type="checkbox" id="repeat-daily"> æ¯å¤©é‡å¤
    </label>

    <!-- é“ƒå£°é€‰æ‹© -->
    <br><br>
    <select id="alarm-sound">
      <option value="music/very nice.mp3">ğŸµ very nice</option>
      <option value="music/a watchful guardian.mp3">ğŸ›¡ a watchful guardian</option>
      <option value="music/DJMOUN-æ–°ä¸–ç•Œï¼ˆvivoæ‰‹æœºé“ƒå£°ï¼‰.mp3">ğŸŒ DJMOUN - æ–°ä¸–ç•Œ</option>
      <option value="music/HUAWEI_15sec.mp3">ğŸ“± HUAWEI é“ƒå£°</option>
      <option value="music/æç¥¥æ™–-å°ç±³é»˜è®¤é“ƒå£° (remixï¼šå°ç±³å…¬å¸é“ƒå£°).mp3">ğŸ“¢ å°ç±³é»˜è®¤é“ƒå£°</option>
      <option value="music/å‘¨æ°ä¼¦-å¤œæ›².mp3">ğŸ¤ å‘¨æ°ä¼¦ - å¤œæ›²</option>
    </select>

    <!-- æ“ä½œæŒ‰é’® -->
    <br><br>
    <button onclick="previewSound()">è¯•å¬é“ƒå£°</button>
    <button onclick="setAlarm()">è®¾ç½®é—¹é’Ÿ</button>
    <button onclick="clearAllAlarms()">å…³é—­æ‰€æœ‰é—¹é’Ÿ</button>

    <!-- æ’­æ”¾å™¨ -->
    <audio id="alarm-audio" style="display: none;" controls>
      <source src="music/very nice.mp3" type="audio/mpeg" />
      æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚
    </audio>

    <!-- å·²è®¾ç½®é—¹é’Ÿåˆ—è¡¨ -->
    <div id="alarm-list" style="margin-top: 20px;">
      <h3>â° å·²è®¾ç½®çš„é—¹é’Ÿ</h3>
      <ul id="alarm-items" style="list-style:none; padding-left: 0;"></ul>
    </div>
  </div>
</body>



  <script>
    let theme = 'modern';
    function setTheme(t) {
      theme = t;
      document.body.className = 'theme-' + theme;
      document.getElementById('theme-title').textContent = {
        modern: 'ç®€çº¦é«˜çº§é’Ÿè¡¨',
        cute: 'å¯çˆ±é£æ ¼æ—¶é’Ÿ',
        batman: 'è™è ä¾ ä¸»é¢˜æ—¶é’Ÿ'
      }[t];
    }

    function drawClock() {
      const canvas = document.getElementById("clock");
      const ctx = canvas.getContext("2d");
      const radius = canvas.height / 2;
      ctx.translate(radius, radius);
      setInterval(() => {
        ctx.clearRect(-radius, -radius, canvas.width, canvas.height);
        drawFace(ctx, radius);
        drawTickMarks(ctx, radius);
        drawNumbers(ctx, radius);
        drawTime(ctx, radius);
      }, 1000);
    }

    function drawFace(ctx, radius) {
      ctx.beginPath();
      ctx.arc(0, 0, radius * 0.95, 0, 2 * Math.PI);
      ctx.fillStyle = theme === 'cute' ? '#fff0f5' : theme === 'batman' ? 'rgba(0,0,0,0.3)' : 'white';
      ctx.strokeStyle = theme === 'cute' ? '#ff90b3' : theme === 'batman' ? '#f9c349' : '#333';
      ctx.fill();
      ctx.lineWidth = radius * 0.05;
      ctx.stroke();
    }

    function drawTickMarks(ctx, radius) {
      for (let i = 0; i < 60; i++) {
        const angle = i * Math.PI / 30;
        const len = i % 5 === 0 ? radius * 0.1 : radius * 0.05;
        ctx.beginPath();
        ctx.lineWidth = i % 5 === 0 ? 2 : 1;
        ctx.strokeStyle = theme === 'batman' ? '#f9c349' : theme === 'cute' ? '#ff90b3' : '#666';
        ctx.moveTo(Math.cos(angle) * (radius * 0.9), Math.sin(angle) * (radius * 0.9));
        ctx.lineTo(Math.cos(angle) * (radius * 0.9 - len), Math.sin(angle) * (radius * 0.9 - len));
        ctx.stroke();
      }
    }

    function drawNumbers(ctx, radius) {
      ctx.font = radius * 0.15 + "px Arial";
      ctx.textBaseline = "middle";
      ctx.textAlign = "center";
      for (let num = 1; num <= 12; num++) {
        const ang = num * Math.PI / 6;
        ctx.rotate(ang);
        ctx.translate(0, -radius * 0.75);
        ctx.rotate(-ang);
        ctx.fillStyle = theme === 'batman' ? '#f9c349' : theme === 'cute' ? '#ff4081' : '#000';
        ctx.fillText(num.toString(), 0, 0);
        ctx.rotate(ang);
        ctx.translate(0, radius * 0.75);
        ctx.rotate(-ang);
      }
    }
       function previewSound() {
  const audio = document.getElementById("alarm-audio");
  const selectedSound = document.getElementById("alarm-sound").value;
  audio.src = selectedSound;
  audio.play();
}

    function drawTime(ctx, radius) {
      const now = new Date();
      let hour = now.getHours();
      let minute = now.getMinutes();
      let second = now.getSeconds();
      hour = hour % 12;
      hour = (hour * Math.PI / 6) + (minute * Math.PI / (6 * 60));
      drawHand(ctx, hour, radius * 0.5, radius * 0.07, theme === 'batman' ? '#f9c349' : '#333');
      minute = (minute * Math.PI / 30);
      drawHand(ctx, minute, radius * 0.8, radius * 0.07, theme === 'batman' ? '#f9c349' : '#333');
      let secondColor = theme === 'batman' ? '#f9c349' : theme === 'cute' ? '#ff4081' : 'red';
      second = (second * Math.PI / 30);
      drawHand(ctx, second, radius * 0.9, radius * 0.02, secondColor, true);
    }

    function drawHand(ctx, pos, length, width, color = '#333', glow = false) {
      ctx.save();
      ctx.beginPath();
      ctx.lineWidth = width;
      ctx.lineCap = "round";
      ctx.strokeStyle = color;
      if (glow) {
        ctx.shadowColor = color;
        ctx.shadowBlur = 10;
      }
      ctx.moveTo(0, 0);
      ctx.rotate(pos);
      ctx.lineTo(0, -length);
      ctx.stroke();
      ctx.rotate(-pos);
      ctx.restore();
    }

    let alarmTime = null;
    let alarmTimeout = null;

    function setAlarm() {
  const input = document.getElementById("alarm-datetime").value;
  const repeat = document.getElementById("repeat-daily").checked;
  const selectedSound = document.getElementById("alarm-sound").value;

  if (!input) {
    alert("è¯·é€‰æ‹©æ—¥æœŸå’Œæ—¶é—´ï¼");
    return;
  }

  const alarm = {
    id: Date.now(), // å”¯ä¸€ ID
    time: input,
    repeat: repeat,
    sound: selectedSound,
  };

  alarms.push(alarm);
  renderAlarms();
}



    let alarms = [];

function setAlarm() {
  const input = document.getElementById("alarm-datetime").value;
  const repeat = document.getElementById("repeat-daily").checked;
  const selectedSound = document.getElementById("alarm-sound").value;

  if (!input) {
    alert("è¯·é€‰æ‹©æ—¥æœŸå’Œæ—¶é—´ï¼");
    return;
  }

  const alarm = {
    id: Date.now(),  // å”¯ä¸€æ ‡è¯†
    time: input,
    repeat: repeat,
    sound: selectedSound,
  };

  alarms.push(alarm);
  renderAlarms(); // å±•ç¤º
}


function renderAlarms() {
  const list = document.getElementById("alarm-items");
  list.innerHTML = ""; // æ¸…ç©ºåˆ—è¡¨å†é‡å»º

  alarms.forEach(alarm => {
    const li = document.createElement("li");
    li.innerHTML = `
      ğŸ•’ ${alarm.time} ${alarm.repeat ? "(æ¯å¤©é‡å¤)" : ""}
      <button onclick="deleteAlarm(${alarm.id})" style="margin-left:10px;">åˆ é™¤</button>
    `;
    list.appendChild(li);
  });
}


function deleteAlarm(id) {
  alarms = alarms.filter(alarm => alarm.id !== id);
  renderAlarms();
}


function checkAlarms() {
  const now = new Date();
  const hhmm = now.toTimeString().slice(0, 5);
  const ymd = now.toISOString().slice(0, 10);

  alarms.forEach(alarm => {
    const alarmTime = alarm.time.slice(11, 16);
    const alarmDate = alarm.time.slice(0, 10);

    if (
      (alarm.repeat && alarmTime === hhmm) ||
      (!alarm.repeat && alarmDate === ymd && alarmTime === hhmm)
    ) {
      playSound(alarm.sound);
    }
  });
}

setInterval(checkAlarms, 1000);
function playSound(url) {
  const audio = document.getElementById("alarm-audio");
  audio.src = url;
  audio.play();
}

    function clearAlarm() {
      alarmTime = null;
      clearInterval(alarmTimeout);
      document.getElementById("alarm-audio").pause();
      document.getElementById("alarm-audio").currentTime = 0;
      alert("é—¹é’Ÿå·²å…³é—­");
    }

    drawClock();
  </script>
</body>
</html>

